{{!< default}}

<article class="gh-article {{post_class}}">

    {{!-- =========================================================== --}}
    {{!-- HERO SECTION                                               --}}
    {{!-- • 50 / 50 layout                                           --}}
    {{!-- • Image (left)                                             --}}
    {{!-- • Full‑height coloured panel with title + excerpt (right)  --}}
    {{!-- =========================================================== --}}

    {{#match @page.show_title_and_feature_image}}
        {{#if feature_image}}
            <header id="hero" class="gh-canvas"
                    style="display:flex;flex-wrap:wrap;width:100%;margin-bottom:2rem;">



                {{!-- ◼︎ COLUMN 1 – COLOURED PANEL (flex‑shrinks) --}}
                <div style="flex:1 1 50%;min-width:0;background:#C7CCCF;color:#fff;display:flex;flex-direction:column;justify-content:center;padding:2rem;box-sizing:border-box;word-break:break-word;">
                    <span style="margin-bottom:0.75rem;opacity:0.85;">
                        {{#if showPublishedAt}}<time datetime="{{date format="YYYY-MM-DD"}}" style="margin-left:0.5rem;">{{date format="DD MMM YYYY"}}</time>{{/if}}
                        {{#if showReadingTime}}<span style="margin-left:0.5rem;">{{reading_time}}</span>{{/if}}
                    </span>

                    <h1 class="gh-article-title" style="text-align:center;font-size:clamp(1.5rem, 5vw, 6rem)">{{title}}</h1>

                    {{#if custom_excerpt}}
                        <p style="opacity:0.9;margin:0;text-align:center;">{{custom_excerpt}}</p>
                    {{/if}}
                </div>

                {{!-- ◼︎ COLUMN 2 – FEATURED IMAGE (flex‑shrinks) --}}
                <figure style="flex:1 1 50%;min-width:0;margin:0;position:relative;z-index:1;overflow:hidden;">
                    <img
                        srcset="{{img_url feature_image size="s"}} 300w,
                                {{img_url feature_image size="m"}} 720w,
                                {{img_url feature_image size="l"}} 960w,
                                {{img_url feature_image size="xl"}} 1200w,
                                {{img_url feature_image size="xxl"}} 2000w"
                        sizes="(max-width: 1200px) 100vw, 600px"
                        src="{{img_url feature_image size="l"}}"
                        alt="{{title}}"
                        style="width:100%;height:100%;object-fit:cover;display:block;">
                </figure>

            </header>
            {{!-- Two-column section for excerpt and tags below header --}}
            <div class="gh-canvas" style="display:flex;flex-wrap:wrap;margin-top:1rem;margin-bottom:1rem;">
                {{!-- Column 1: Tags --}}
                <div style="flex:1 1 50%;min-width:300px;padding-left:1.5rem;box-sizing:border-box;">
                    {{#if tags}}
                        <p>Tags
                        {{!-- <div style="display:flex;flex-wrap:wrap;gap:0.5rem;"> --}}
                            {{#foreach tags}}
                                <a class="gh-article-tag" href="{{url}}">{{name}}</a>
                            {{/foreach}}
                        </p>
                        {{!-- </div> --}}
                    {{/if}}
                    {{#if authors}}
                        <p>Author
                        {{!-- <div style="display:flex;flex-wrap:wrap;gap:0.5rem;"> --}}
                            {{#foreach authors}}
                                <a  class="gh-article-tag" href="{{url}}">{{name}}</a>
                            {{/foreach}}
                        </p>
                        {{!-- </div> --}}
                    {{/if}}
                </div>
                
                {{!-- Column 2: Image caption --}}
                <div style="flex:1 1 50%;min-width:300px;padding-right:1.5rem;box-sizing:border-box;">
                    {{#if feature_image_caption}}
                        <figcaption style="font-size:0.875rem;margin-top:0rem;opacity:0.8;">{{feature_image_caption}}</figcaption>
                    {{/if}}
                </div>                                
            </div>
        {{else}}
            {{!-- Fallback – no image → classic stacked header --}}
            <header class="gh-article-header gh-canvas">
                <div style="flex:1 1 50%;min-width:0;background:#C7CCCF;color:#fff;display:flex;flex-direction:column;justify-content:center;padding:2rem;box-sizing:border-box;word-break:break-word;border-radius:16px;">
                    <span>
                        {{#if showPrimaryTag}}{{#if primary_tag}}<a href="{{primary_tag.url}}"{{#if primary_tag.accent_color}} style="color: {{primary_tag.accent_color}};"{{/if}}>{{primary_tag.name}}</a>{{/if}}{{/if}}
                        {{#if showPublishedAt}}<time datetime="{{date format="YYYY-MM-DD"}}">{{date format="DD MMM YYYY"}}</time>{{/if}}
                        {{#if showReadingTime}}<span>{{reading_time}}</span>{{/if}}
                    </span>
                    <h1 class="gh-article-title">{{title}}</h1>
                    {{#if custom_excerpt}}<p>{{custom_excerpt}}</p>{{/if}}
                </div>
            </header>
        {{/if}}
    {{/match}}

    {{!-- =========================================================== --}}
    {{!-- MAIN POST CONTENT                                          --}}
    {{!-- =========================================================== --}}

    <section class="gh-content gh-canvas">{{content}}</section>

    {{!-- =========================================================== --}}
    {{!-- COMMENTS (unchanged)                                       --}}
    {{!-- =========================================================== --}}

    {{#if showComments}}{{#if comments}}
        <div class="gh-article-comments gh-canvas">
            <h2 class="gh-article-comments-title">{{comment_count empty="" single="comment" plural="comments"}}</h2>
            {{comments title="" count=false}}
        </div>
    {{/if}}{{/if}}
</article>

{{!-- ============================================= --}}
{{!-- MEDIA QUERY (optional) – stack on small screens --}}
{{!-- ============================================= --}}
<style>
@media (max-width: 770px) {
    #hero {
        flex-direction: column;
    }
    #hero > figure,
    #hero > div {
        max-width: 100% !important;
        flex: 0 0 100% !important;
    }
    #hero > div {
        padding: 1.5rem !important;
    }
    #hero > figure img { height:auto; }
}
</style>
